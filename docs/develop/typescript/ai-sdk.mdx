---
id: ai-sdk
title: AI SDK - TypeScript SDK
sidebar_label: AI SDK
toc_max_heading_level: 2
keywords:
  - ai
  - agents
tags:
  - AI SDK
  - TypeScript SDK
  - Temporal SDKs
description: Implement AI applications in TypeScript using the Temporal TypeScript SDK and the AI SDK.
---

Temporal's integration with[Vercel's AI SDK](https://ai-sdk.dev/) lets you use the AI SDK's API directly in Workflow
code while Temporal handles Durable Execution. If you're already familiar with the Vercel AI SDK, this integration lets
you bring that experience to Temporal.

## How it works

Like all API calls, LLM API calls are non-deterministic, so they usually run as Activities. The AI SDK plugin handles
this automatically: when you call methods in the AI SDK such as `generateText()`, the plugin wraps those calls in
Activities behind the scenes. This preserves the Vercel AI SDK's developer experience that you are already familiar with
while Temporal handles Durable Execution.

## Configure the Worker

Install the `@temporalio/ai-sdk` package and add the plugin to your Worker. The `modelProvider` specifies which AI
provider to use when creating models (OpenAI, Anthropic, etc.).

```ts
import { openai } from '@ai-sdk/openai';
import { AiSDKPlugin } from '@temporalio/ai-sdk';

const worker = await Worker.create({
  plugins: [
    new AiSDKPlugin({
      modelProvider: openai,
    }),
  ],
  connection,
  namespace: 'default',
  taskQueue: 'ai-sdk',
  workflowsPath: require.resolve('./workflows'),
  activities,
});
```

See the full example at [ai-sdk samples](https://github.com/temporalio/samples-typescript/tree/main/ai-sdk).

## Write a Workflow

Use the AI SDK as you normally would, but pass `temporalProvider.languageModel()` as the model. The string you provide
(like `'gpt-4o-mini'`) is passed to your configured `modelProvider` to create the model.

```ts
import { generateText } from 'ai';
import { temporalProvider } from '@temporalio/ai-sdk';

export async function haikuAgent(prompt: string): Promise<string> {
  const result = await generateText({
    model: temporalProvider.languageModel('gpt-4o-mini'),
    prompt,
    system: 'You only respond in haikus.',
  });
  return result.text;
}
```

## Tool calling

You can provide tools to the AI SDK, and when the model calls them, they execute in the Workflow. Tool functions follow
the same rules as Workflow code: they must be deterministic, but they can call Activities and Child Workflows.

In this example, the `getWeather` tool calls an Activity:

```ts
import { proxyActivities } from '@temporalio/workflow';
import { generateText, tool } from 'ai';
import { temporalProvider } from '@temporalio/ai-sdk';
import { z } from 'zod';

const { getWeather } = proxyActivities<typeof activities>({
  startToCloseTimeout: '1 minute',
});

export async function toolsAgent(question: string): Promise<string> {
  const result = await generateText({
    model: temporalProvider.languageModel('gpt-4o-mini'),
    prompt: question,
    system: 'You are a helpful agent.',
    tools: {
      getWeather: tool({
        description: 'Get the weather for a given city',
        inputSchema: z.object({
          location: z.string().describe('The location to get the weather for'),
        }),
        execute: getWeather,
      }),
    },
    stopWhen: stepCountIs(5),
  });
  return result.text;
}
```

## MCP tools

The integration includes a stateless MCP client for use in Workflows. Configure the Worker with an `mcpClientFactory` to
define how MCP clients are created:

```ts
import { experimental_createMCPClient as createMCPClient } from '@ai-sdk/mcp';
import { StdioClientTransport } from '@modelcontextprotocol/sdk/client/stdio.js';

const mcpClientFactory = () =>
  createMCPClient({
    transport: new StdioClientTransport({
      command: 'node',
      args: ['lib/mcp-server.js'],
    }),
  });

const worker = await Worker.create({
  plugins: [
    new AiSDKPlugin({
      modelProvider: openai,
      mcpClientFactory,
    }),
  ],
  // ... other config
});
```

In a Workflow, use `TemporalMCPClient` to get the available tools. Both listing tools and calling them run as
Activities.

```ts
import { TemporalMCPClient } from '@temporalio/ai-sdk';

const mcpClient = new TemporalMCPClient();
const tools = await mcpClient.tools();

const result = await generateText({
  model: temporalProvider.languageModel('gpt-4o-mini'),
  prompt,
  tools,
  system: 'You are a helpful agent. You always use your tools when needed.',
  stopWhen: stepCountIs(5),
});
```
