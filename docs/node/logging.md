---
id: logging
title: Logging in Node
sidebar_label: Logging
---

## Logging from Activities

Activities run in the standard Node.js environment and can use any Node.js logger.

## Logging from Workflows

Logging from Workflows is tricky for 2 reasons:

1. Workflows run in an isolated JS environment and may not do any I/O
1. Workflow code might get replayed generating duplicate log messages

In order to get around this limitation, use the [External Dependencies](/docs/node/external-dependencies) mechanism
to inject replay-aware functions from the Node.js environment into a Workflow isolate.

## Logs generated by SDK components

The Worker comes with a default logger which defaults to log any messages with level `INFO` and higher to `STDERR` using `console.error`.
There are 5 levels in total: `TRACE`, `DEBUG`, `INFO`, `WARN`, and `ERROR`.

The reason we only offer a default logger is to minimize Worker dependencies and allow SDK users to bring their own logger.

### Customizing the default logger

Temporal ships a [`DefaultLogger`](https://nodejs.temporal.io/api/classes/worker.defaultlogger/) that implements the basic interface:

```ts
import { Worker, DefaultLogger, LogEntry } from '@temporalio/worker';

// Set up the DefaultLogger to only log messages with level WARNING and higher with a custom log function
const logger = new DefaultLogger('WARNING', (severity, message, meta) => {
  console.log(`Custom logger: ${severity} â€” ${message}`);
});
const worker = await Worker.create({
  workflowsPath: require.resolve('./workflows'),
  activities, // imported separately
  logger,
});

// accumulate logs for testing/reporting
const logs: Array<Omit<LogEntry, 'timestampNanos'>> = [];
const log = new DefaultLogger('WARN', ({ level, message, meta }) =>
  logs.push({ level, message, meta })
);
log.debug('hey', { a: 1 });
log.info('ho');
log.warn('lets', { a: 1 });
log.error('go');
```

The log levels are [listed here](https://nodejs.temporal.io/api/modules/worker/#loglevel) in increasing order of severity.

### Using a custom logger

A common logging use case is logging to a file to be picked up by a collector like the [Datadog Agent](https://docs.datadoghq.com/logs/log_collection/nodejs/?tab=winston30).

```ts
import { Worker } from '@temporalio/worker';
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  transports: [new transports.File({ filename: '/path/to/worker.log' })],
});
const worker = await Worker.create({
  workflowsPath: require.resolve('./workflows'),
  activities, // imported separately
  logger,
});
```

## OpenTelemetry Logging

We are in the process of documenting our OTel support, but meanwhile you can [view our tests](https://github.com/temporalio/sdk-node/blob/4505eee94e7d8a10bc187612977fd72bc6d740a6/packages/test/src/test-otel.ts) and get in touch if you need this.
