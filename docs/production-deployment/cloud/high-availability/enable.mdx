---
id: enable
<<<<<<< HEAD
title: How to enable high availability
sidebar_label: How to enable high availability
slug: /cloud/replication/enable
description: Temporal Cloud's Replicated Namespaces offer automated failover, synchronized data replication, and high availability for workloads requiring disaster-tolerant deployment and 99.99% uptime. Use Global Namespace for self-hosted.
=======
title: Enable high availability
sidebar_label: Enable high availability
slug: /cloud/high-availability/choosing-high-availability
description: Temporal Cloud's High-Availability Namespaces offer automated failover, synchronized data replication, and high availability for workloads requiring disaster-tolerant deployment and 99.99% uptime. Use Global Namespace for self-hosted.
>>>>>>> parent of cf6c2c1c (EDU-3661: Monday Feb 3 Updates with Nikitha feedback)
tags:
  - Temporal Cloud
  - Production
  - High availability
keywords:
  - availability
  - explanation
  - failover
  - high-availability
  - replication

  - multi-region
  - multi-region namespace
  - namespaces
  - temporal-cloud
  - term
---
import { RelatedReadContainer, RelatedReadItem } from '@site/src/components/related-read/RelatedRead';

<<<<<<< HEAD
Adding a replica to a new or existing Namespace enables Temporal Cloud's high availability features.
You can either create a replica within the current region or deploy the replica to a different region.
Once added, Temporal Cloud starts replicating ongoing and existing Workflows, along with their metadata.
After replication is complete and your replica is ready, your Namespace is prepared for failover.
If an incident occurs, failover transfers control from the active Namespace to the replica.

This page shows you how to:

- [Create a new high availability Namespace](/cloud/replication/enable#create)
- [Upgrade an existing Namespace for high availability functionality](/cloud/replication/enable#upgrade)
- [Discontinue high availability replication](/cloud/replication/enable#discontinuing)

## Create a high availability Namespace {#create}

To create a new replicated Namespace, you can use the Temporal Cloud Web site or the `tcld` command line utility.
The following table explains how:

| Approach                  | Instructions                                                                                                                                                  |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Temporal&nbsp;Cloud&nbsp;Web&nbsp;UI**  | 1. Visit Temporal Cloud in your Web browser. <br /> 2. During Namespace creation, specify the active region for the Namespace. <br /> 3. Select "Add a replica". <ul><li>Adding a replica in the same region enables Replication.</li><li>Adding a replica in a different region enables Multi-region Replication.</li></ul> |
| **Temporal&nbsp;`tcld`&nbsp;CLI**    | At the command line, enter: <br /> <tt>tcld namespace create \ <br /> &nbsp;&nbsp;&nbsp;&nbsp;--namespace \<namespace_id>.\<account_id> \ <br />&nbsp;&nbsp;&nbsp;&nbsp;--region \<active_region> \ <br /> &nbsp;&nbsp;&nbsp;&nbsp;--region \<replica_region></tt> <br /> <br /> Specify the [region codes](/cloud/service-availability) as arguments to the two `--region` flags. <ul> <li>Using the same region replicates to an isolation zone within that region.</li> <li>Using a different region within the same continent creates a multi-region Namespace.</li> </ul> Before pressing return, add your authentication credentials. For example, `--ca-certificate-file <path-to-pem-file>`. |

:::note

Replication is not supported in all regions.
For multi-region replication, pairing is limited to regions within the same continent.
For more details, refer to ["Regional availability"].(/cloud/high-availabilityregional-availability).

:::

## Upgrade an existing Namespace to high availability functionality {#upgrade}

Upgrade an existing single-region Namespace to high availability features by establishing a replica.
The following table explains how:

| Approach                  | Instructions                                                                                                                                                  |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Temporal&nbsp;Cloud&nbsp;Web&nbsp;UI**  | 1. Visit Temporal Cloud Namespaces in your Web browser. <br /> 2. Navigate to the Namespace details page. <br /> 3. Select the “Add a replica” button. <br /> 4. Choose either **Replication** (in the same region) or **Multi-region Replication** (across regions). <ul><li>If you select Multi-region Replication, specify which region.</li></ul> The web interface will present an estimated time for replication to complete. <br /> This time is based on your selection and the size and scale of the Workflows in your Namespace. <br /> An email alert is dispatched once your highly available Namespace is ready for use. |
| **Temporal&nbsp;`tcld`&nbsp;CLI**    | At the command line, enter: <br /> <tt>tcld namespace add-region \ <br /> &nbsp;&nbsp;&nbsp;&nbsp;--namespace \<namespace_id>.\<account_id> \ <br />&nbsp;&nbsp;&nbsp;&nbsp;--region \<replica_region></tt> <br /> <br /> Specify the added [region code](/cloud/service-availability) as an argument to the `--region` flag. <ul><li>Using the current region replicates to an isolation zone within your existing region.</li><li>Using a different region within the same continent creates a multi-region Namespace.</li></ul> <br /> Before pressing return, add your authentication credentials.<br />For example, `--ca-certificate-file <path-to-pem-file>`. <br /> An email alert is sent once your multi-region Namespace is ready for use. |

## Discontinue high availability replication {#discontinuing}

Removing a Namespace replica disables high availability and automatic failover features.
Follow these steps to disable these features and end high availability charges:

1. Navigate to the Namespace details page in Temporal Cloud.
2. On the "Region" card, select the option to "Remove Replica."

Temporal Cloud deletes the replica.
Your Namespace will no longer be highly available and you will no longer be charged for this feature.
=======
:::tip Support, stability, and dependency info

High-availability Namespaces are in [Public Preview](/evaluate/development-production-features/release-stages#public-preview) for Temporal Cloud.

:::

<div style={{backgroundColor: '#ffff00',padding: '0px 15px',borderRadius: '5px',border: '1px solid #cccccc',display: 'inline-block'}}>**Some audits, updates. Needs intros, re-org. Suggest breaking down into "opting in", "setting up (worker and privatelink)", and "testing" because the content feels really mixed up right now and too long and the metrics section is now a little too short**</div>

You can enable the high-availability Namespace feature for your existing Namespace by [adding a second zone](#add-zones) to your Namespace.
After adding the second zone, Temporal Cloud begins data replication for your new standby replica.
Temporal Cloud notifies you once the replication has caught up and both Namespace zones are in sync.

**Advantages of using a high-availability Namespace:**

- No manual deployment or configuration needed, just simple push-button operation.
- Open Workflows continue in the standby region with minimal interruption and data loss.
- No changes needed for Worker and Workflow code during setup or failover.
- 99.99% Contractual SLA.

### Create a multi-region Namespace {#create}

The following sections explain how to create a new multi-region Namespace (MRN).
MRNs provide multi-region deployment backed by Temporal's data replication and active-standby features.

:::tip

While reading through this coverage, remember that pairing is currently limited to regions within the same continent.

:::

#### Temporal Cloud Web UI

During Namespace creation, specify the first region for the Namespace.
Then, select the “Add a region” option.
Adding a second region enables multi-region Namespace capabilities.

#### Temporal 'tcld' CLI

Start with the following command to create the new multi-region Namespace:

```
tcld namespace create \
    --namespace <namespace_id>.<account_id> \
    --region <region>
```

Include both regions by specifying the [region codes](/cloud/service-availability) as arguments to the `--region` flags.
Before pressing return, add your authentication credentials. For example, `--ca-certificate-file <path-to-pem-file>`.




## Upgrade an existing single-zone Namespace for high-availability functionality {#add-zones}

You can upgrade existing ssingle-zone Namespace for high-availability by adding a standby zone.
The following sections show you how.

<div style={{backgroundColor: '#ffff00',padding: '0px 15px',borderRadius: '5px',border: '1px solid #cccccc',display: 'inline-block'}}>**The following material has not been audited for MRN/HAN**</div>

#### Temporal Cloud Web UI

To upgrade an existing Namespace to a multi-region Namespace:

1. Visit Temporal Cloud [Namespaces](https://cloud.temporal.io/namespaces) in your Web browser
1. Navigate to the Namespace details page
1. Select the “Add a region” button.
1. Select the standby region you want to add to this Namespace

You will see an estimated time for replication.
This time is based on your selection and the size and scale of Workflows in your Namespace,
An email alert is sent once your multi-region Namespace is ready for use.

#### Temporal 'tcld' CLI

At the command line, enter:

```
tcld namespace add-region \
    --namespace <namespace_id>.<account_id> \
    --region <region>
```

Specify the region code for the new region to add.
Before pressing return, add your authentication credentials. For example, `--ca-certificate-file <path-to-pem-file>`.
An email alert is sent once your multi-region Namespace is ready for use.

### Discontinuing multi-region availability {#discontinuing}

Disabling multi-region removes the high availability and automatic failover features that provide Temporal's highest service level agreement.
To disable the feature and end charges, users must contact [Temporal Support](https://support.temporal.io) directly.
MRN-specific charges for replication will stop once this decommissioning procedure completes.

- When making your request you must let us know which region you want the Namespace to land in after removing the standby region.
- If you cease services in the middle of the month, your Namespace will be converted to a single region Namespace within 1 business day.
- Temporal won't retain replicated data in the standby region once multi-region has been disabled.
- After disabling multi-region, Temporal Cloud cannot re-enable the feature for a given Namespace for seven days.

## Triggering failovers {#triggering-failovers}
>>>>>>> parent of cf6c2c1c (EDU-3661: Monday Feb 3 Updates with Nikitha feedback)

Failovers happen automatically in Temporal when a regional outage or disaster affects a multi-region Namespace.
You can also trigger a failover based on custom alerts or for testing purposes.
This section explains how to manually trigger a failover and what to expect afterward.

Regular failover testing ensures your app can handle disruptions and continue running smoothly in production.
Whether responding to incident warnings or conducting tests, follow the steps in the next sections to move your active Namespace to its standby region and learn how to handle failovers effectively.

For details on how Temporal detects conditions and triggers failovers automatically, see [Failovers](/cloud/multi-region/#failovers).

:::warning Check Your Replication Lag

Always check the [metric replication lag](/production-deployment/cloud/metrics/reference#temporal_cloud_v0_replication_lag_bucket) before initiating a failover.
A forced failover when there is a large replication lag has a higher likelihood of rolling back Workflow progress.

:::

**Performing manual failovers**

You can trigger a failover manually using the Temporal Cloud Web UI or the `tcld` CLI, depending on your preference and setup.
The following table outlines the steps for each method:

| Method                    | Instructions                                                                                                                                                                                                                                                            |
| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Temporal Cloud Web UI** | 1. Visit the [Namespace page](https://cloud.temporal.io/namespaces) on the Temporal Cloud Web UI.<br />2. Navigate to your Namespace details page and select the **Trigger a failover** option from the menu.<br />3. After confirming, the failover will be initiated. |
| **Temporal `tcld` CLI**   | To manually trigger a failover, run the following command in your terminal:<br /><tt>tcld namespace failover \ </tt><br /><tt>&nbsp;&nbsp;&nbsp;&nbsp;--namespace \<namespace_id>.\<account_id> \ </tt><br /><tt>&nbsp;&nbsp;&nbsp;&nbsp;--region \<target_region></tt> |

**Post-failover event information**

After any failover, whether triggered by you or by Temporal, event information appears in both the [Temporal Cloud Web UI](https://cloud.temporal.io/namespaces) (on the Namespace detail page) and in your audit logs.
The audit log entry for Failover uses the `"operation": "FailoverNamespace"` event.
After failover, the Namespace is active in the new region.

You don't need to monitor Temporal Cloud's failover response in real-time.
Whenever there is a failover event, users with the Account Owner and Global Admin roles automatically receive an alert email.

**Failbacks**

After Temporal-initiated failovers, Temporal Cloud shifts Workflow Execution processing back to the original region that was active before the incident (a "failback") once the incident is resolved.

**Reasons to test failing over**

Microservices and external dependencies will fail at some point.
Testing failovers ensures your app can handle these failures effectively.
Temporal recommends regular and periodic failover testing for mission-critical applications in production.
By testing in non-emergency conditions, you verify that your app continues to function even when parts of the infrastructure fail.

:::tip Safety First

If this is your first time performing a failover test, run it with a test-specific namespace and application.
This helps you gain operational experience before applying it to your production environment.
Practice runs help ensure the process runs smoothly during real incidents in production.

:::

Trigger testing can:

- **Validate multi-region deployments**:
  In multi-region setups, failover testing ensures your app can run from another region when the primary region experiences outages.
  This maintains high availability in mission-critical deployments.
  Manual testing confirms the failover mechanism works as expected, so your system handles regional outages or disasters effectively.

- **Assess replication lag**:
  Monitoring [replication lag](/cloud/multi-region#metrics-operations) between regions is crucial in multi-region setups.
  Check the lag before initiating a failover to avoid rolling back Workflow progress.
  Manual testing helps you practice this critical step and understand its impact.
  When there's no real incident, the switch over (recovery) should happen almost instantly.

- **Assess recovery time**:
  Manual testing helps you measure actual recovery time.
  You can check if it meets your expected Recovery Time Objective (RTO) of 20 minutes or less, as stated in the [Multi-region Namespace SLA](/cloud/multi-region#sla).

- **Identify potential issues**:
  Failover testing uncovers problems not visible during normal operation.
  This includes issues like [backlogs and capacity planning](https://temporal.io/blog/workers-in-production#testing-failure-paths-2438) and how external dependencies behave during a failover event.

- **Validate fault-oblivious programming**:
  Temporal uses a "fault-oblivious programming" model, where your app doesn’t need to explicitly handle many types of failures.
  Testing failovers ensures that this model works as expected in your app.

- **Operational readiness**:
  Regular testing familiarizes your team with the failover process, improving their ability to handle real incidents when they arise.

Testing failovers regularly ensures your Temporal-based applications remain resilient and reliable, even when infrastructure fails.


## Worker Deployment {#worker-deployment}

Enabling the multi-region Namespace does not require specific Worker configuration.
The process is invisible to the Workers.
When a Namespace fails over to the standby region, the DNS redirection orchestrated by Temporal ensures that your existing Workers continue to poll the Namespace without interruption.
More details are available in the [Routing](/cloud/multi-region#routing) section below.

:::info

- When a Namespace fails over to a standby region, Workers will be communicating cross-region.

- In case of a complete regional outage, Workers in the original region may fail alongside the original Namespace.
  To keep Workflows moving during this level of outage, deploy a second set of Workers to your standby region.

:::

## Routing {#routing}

When using multi-region for a Namespace, the Namespace's DNS record `<ns>.<acct>.<tmprl_domain>` targets a regional DNS record in the format `<region>.region.<tmprl_domain>`.
In this format, `<region>` is the currently active region for your Namespace.
Clients resolving the Namespace’s DNS record are directed to connect to the active region for that Namespace, thanks to the regional DNS record.

During failover, Temporal Cloud changes the target of the Namespace DNS record from one region to another.
Namespace DNS records are configured with a 15 seconds <a href="https://en.wikipedia.org/wiki/Time_to_live">TTL</a>.
Any DNS cache should re-resolve the record within this delay. As a rule of thumb, DNS reconciliation takes no longer than twice (2x) the TTL.
Clients should converge to the newly targeted region within, at, most a 30-second delay.


## PrivateLink routing {#privatelink-routing}

:::important

Some networking configuration is required for failover to be transparent to clients and workers when using PrivateLink.
This section describes how to configure routing for multi-region Namespaces for PrivateLink customers only.

:::

PrivateLink customers may need to change certain configurations for multi-region Namespace use.
Routing configuration depends on networking setup and use of PrivateLink.
You may need to:

- override a DNS zone; and
- ensure the network connectivity between the two regions.

![Customer side solution example](/img/multi-region/private-link.png)

When using PrivateLink, you connect to Temporal Cloud using IP addresses local to your network.
The `region.<tmprl_domain>` zone is configured in the Temporal systems as an independent zone.
This allows you to override it to make sure traffic is routed internally for the regions in use.
You can check the Namespace's active region using the Namespace record CNAME, which is public.

To set up the DNS override, you override specific regions to target the relevant IP addresses (e.g. aws-us-west-1.region.tmprl.cloud to target 192.168.1.2).
Using AWS, this can be done using a private hosted zone in Route53 for `region.<tmprl_domain>`.
Link that private zone to the VPCs you use for Workers.
Private Link is not yet offered for GCP multi-region Namespaces.

When your Workers connect to the Namespace, they first resolve the `<ns>.<acct>.<tmprl_domain>` record.
This targets `<active>.region.<tmprl_domain>` using a CNAME. Your private zone overrides that second DNS resolution, leading traffic to reach the internal IP you're using.

Consider how you'll configure Workers to run in this scenario.
You might set Workers to run in both regions at all times.
Alternately, you could establish connectivity between the regions to redirect Workers once failover occurs.

The following table lists Temporal's available regions, PrivateLink endpoints, and DNS record overrides.
The `sa-east-1` region listed here is not yet available for use with multi-region Namespaces.

| Region           | PrivateLink Service Name                                       | DNS Record Override                     |
| ---------------- | -------------------------------------------------------------- | --------------------------------------- |
| `ap-northeast-1` | `com.amazonaws.vpce.ap-northeast-1.vpce-svc-08f34c33f9fb8a48a` | `aws-ap-northeast-1.region.tmprl.cloud` |
| `ap-northeast-2` | `com.amazonaws.vpce.ap-northeast-2.vpce-svc-08c4d5445a5aad308` | `aws-ap-northeast-2.region.tmprl.cloud` |
| `ap-south-1`     | `com.amazonaws.vpce.ap-south-1.vpce-svc-0ad4f8ed56db15662`     | `aws-ap-south-1.region.tmprl.cloud`     |
| `ap-south-2`     | `com.amazonaws.vpce.ap-south-2.vpce-svc-08bcf602b646c69c1`     | `aws-ap-south-2.region.tmprl.cloud`     |
| `ap-southeast-1` | `com.amazonaws.vpce.ap-southeast-1.vpce-svc-05c24096fa89b0ccd` | `aws-ap-southeast-1.region.tmprl.cloud` |
| `ap-southeast-2` | `com.amazonaws.vpce.ap-southeast-2.vpce-svc-0634f9628e3c15b08` | `aws-ap-southeast-2.region.tmprl.cloud` |
| `ca-central-1`   | `com.amazonaws.vpce.ca-central-1.vpce-svc-080a781925d0b1d9d`   | `aws-ca-central-1.region.tmprl.cloud`   |
| `eu-central-1`   | `com.amazonaws.vpce.eu-central-1.vpce-svc-073a419b36663a0f3`   | `aws-eu-central-1.region.tmprl.cloud`   |
| `eu-west-1`      | `com.amazonaws.vpce.eu-west-1.vpce-svc-04388e89f3479b739`      | `aws-eu-west-1.region.tmprl.cloud`      |
| `eu-west-2`      | `com.amazonaws.vpce.eu-west-2.vpce-svc-0ac7f9f07e7fb5695`      | `aws-eu-west-2.region.tmprl.cloud`      |
| `sa-east-1`      | `com.amazonaws.vpce.sa-east-1.vpce-svc-0ca67a102f3ce525a`      | `aws-sa-east-1.region.tmprl.cloud`      |
| `us-east-1`      | `com.amazonaws.vpce.us-east-1.vpce-svc-0822256b6575ea37f`      | `aws-us-east-1.region.tmprl.cloud`      |
| `us-east-2`      | `com.amazonaws.vpce.us-east-2.vpce-svc-01b8dccfc6660d9d4`      | `aws-us-east-2.region.tmprl.cloud`      |
| `us-west-2`      | `com.amazonaws.vpce.us-west-2.vpce-svc-0f44b3d7302816b94`      | `aws-us-west-2.region.tmprl.cloud`      |

:::tip Learn more about multi-region Namespaces

If you have more questions or feedback about this feature, reach out to <a href="mailto:product@temporal.io">the product team</a>.

:::

