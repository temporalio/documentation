---
id: high-availability
slug: /cloud/high-availability
title: High availability namespaces.
sidebar_label: High Availability
sidebar_position: 5
tags:
  - high-availability
  - multi-region namespace
  - failover
  - availability
  - namespaces
---

:::tip Support, stability, and dependency info
- High Availability is in [Public Preview](/temporal/release-stages#public-preview) for Temporal Cloud.

:::
<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>I kept high availability namespace in lower-case here, as the original doc did.
Is this correct?</span>

Temporal Cloud's high availability namespace feature introduces push-button multi-region availability for your Temporal Service.
This feature enables you to choose a standby region for a Temporal Namespace.
The service takes care of the complexity of replicating data from the active region to the standby region and failing over to the standby region when needed.


- [What is high availability?](/cloud/high-availability#high-availability-intro)
- [Why choose high availability?](/cloud/high-availability#why-high-availability)
- [Understanding failover and failover scenarios](/cloud/high-availability#failovers)
- [High availability SLA](/cloud/high-availability#sla)
- [High availability architecture overview](/cloud/high-availability#architecture)
- [Pricing](/cloud/high-availability#pricing)
- [Manage your high-availability namespaces](/cloud/high-availability#management)

## What is high availability? {#high-availability-intro}

A high availability namespace provides a single endpoint for a multi-region service.
This option offers a single logical namespace that runs in two physical regions, one active and one standby.
As Workflows progress in the active region, history events are asynchronously replicated to the standby region.

In case of an incident or outage in the active region, Temporal Cloud will "failover" to the standby region.
A failover means to switch the roles of the active and standby regions.
Temporal's high availability failovers enable existing Workflow Executions to keep running and new Executions to be initiated.

In the traditional definition of active/active replication, multiple nodes serve requests and accept writes simultaneously with strong synchronous data consistency.
High availability namespaces in Temporal Cloud allow two replicated namespaces (one active, one standby) to accept requests, but not simultaneously.
Requests are accepted, and Workflow history events are written to the active region and then asynchronously replicated to the standby region.

Before failover            |  After failover
:-------------------------:|:-------------------------:
![Before failover](/img/multi-region/before-failover.png)  |  ![After failover](/img/multi-region/after-failover.png)

## Why choose high availability? {#why-high-availability}

For a namespace in a single region, Temporal Cloud provides 99.99% availability and its contractual service level agreement (SLA) has a 99.9% guarantee against service errors.
For many applications, this is sufficient availability.
With this strategy, Temporal clients connect to a single namespace in a single AWS region.
This approach works well for workloads that need the availability provided by Temporal Cloud’s single-region namespaces.

High availability supports standby recovery.
It is deployed using a simple namespace setting.
All back-end deployment is completed by Temporal Cloud.

In the event of a regional failure, Temporal Cloud automatically fails over to the namespace in the secondary region.
When faced with network latency or other region-wide issues, failover can be deliberately triggered.


High availability advantages:

* No manual deployment or configuration needed with push button operation.
* Open workflows continue in a secondary region with minimal interruption and data loss.
* No changes required to workers and workflow starter code in setup and failover.
* 99.99% Contractual SLA.

## Understanding failover and failover scenarios {#failovers}

Consider an incident or outage that leads to elevated error rates or latency in the active region of a high availability namespace.
Under these circumstances, Temporal Cloud will initiate a namespace failover operation.
This operation shifts Workflow processing to a standby region, unaffected by the incident.
This allows both existing Workflows to progress and new Workflows to be created as the incident is addressed.


Customers who wish to test the set-up of their high availability namespace can manually trigger failovers using the UI, API, or CLI.
For most scenarios, we recommend you let Temporal handle failovers for you.

### Replication lag {#replication-lag}

When using high availability namespaces, the replication between regions is asynchronous.
Any updates to the workflow in the active region, and the history events associated with it, will be applied to the standby region with a short delay.
This delay is called the replication lag.
Temporal Cloud aims to provide a P95 replication delay of less than 1 minute.


Due to this delay, a [forced failover]((/cloud/high-availability#forced-failover) could cause workflows to rollback in progress or cause recently started Workflows to be absent until the region recovers.
<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>FIXME: Add link to conflict resolution converage</span>
Temporal event versioning and conflict resolution mechanisms ensure that the eventual history of the Workflow is still replayable by the SDK.
Critical operations like Signals won't get lost.


### Failover scenarios

The Temporal Cloud failover mechanism supports several modes to execute namespace failovers.

Hybrid mode is the default.
These modes include:

#### Graceful failover (handover) {#graceful-failover}

In this mode, replication tasks are fully processed and drained.
Traffic to the namespace is paused before the failover to ensure no loss of progress or data conflicts.

This approach may result in a short period of unavailability with a default value of 10 seconds.

During this period, existing Workflows will stop progress.
That means state transitions will not happen and tasks will not be dispatched.
User requests like start/signal workflow will be rejected as operations are paused during handover.

This mode favors consistency over availability.

#### Forced failover {#forced-failover}

In this mode, a namespace is immediately activated in the standby region.
<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>FIXME: Add link to conflict resolution converage</span>
Events not yet replicated due to [replication lag](/cloud/high-availability#replication-lag) will undergo conflict resolution upon reaching the new active region.
This mode prioritizes availability over consistency.

#### Hybrid failover mode {#hybrid-failover}

While graceful failovers are normally preferred for consistency, they are not always practical.
The hybrid failover mode (the default mode) limits graceful failover attempts to 10 seconds or less.
If the graceful approach does not resolve the issue, Temporal Cloud automatically switches to a forced failover.
This strategy balances consistency and availability requirements.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>FIXME: FIXME: Add links to Triggering a failover, Worker deployment, and Routing (probably re-named?  traffic after failovers?</span>
See the sections on triggering a failover, Worker deployment, and routing for more information.

## High availability SLA {#high-availability-sla}

High availability namespaces offer 99.99% availability.
This is enforced by an SLA on [service error rates](https://docs.temporal.io/cloud/sla).
Our system is designed to limit data loss after recovery when the incident triggering the failover is resolved.

The recovery point objective ([RPO](https://en.wikipedia.org/wiki/Disaster_recovery#Recovery_Point_Objective)) is near-zero.
There may be a short period of time—the [replication lag](/cloud/high-availability#replication-lag)—during the incident when some data may be unavailable.
If the active region is unable to reach the standby region, the data will be unavailable until the network issue is fixed and data has finished replicating.
In a disaster scenario in which the data on the hard drives in the active region are not recoverable, the duration of data loss can be as high as the replication lag at the time of disaster.

We've designed Temporal Cloud to proactively respond to incidents by triggering failovers.
Our recovery time objective ([RTO](https://en.wikipedia.org/wiki/Disaster_recovery#Recovery_Time_Objective)) is 20 minutes or less per incident.
We aim to reduce this RTO in the future.

### Regional availability {#regional-availability}

High availability namespaces are available in all existing [Temporal Cloud regions](/cloud/service-availability#regions).

:::info
- Namespace pairing is limited to regions within the same continent.
South America is excluded as only one region is available.


:::

## High availability architecture overview {#architecture}

High availability namespaces enable replication of Namespace metadata and Workflow Executions across connected regions.
This redundancy, plus the added failover capability, provides measurable stability when dealing with outages.

A high availability namespace is normally in a single region at any moment.
The passive region assumes a standby role.
The only exception occurs in the event of a network partition.

In this event, an operator may elect to promote a standby region to active status.
Be aware that this action will temporarily result in both regions being active.
Once the network partition is resolved and communication between the regions is restored, a conflict resolution algorithm determines which region continues as the active one.
This ensures only one region remains active.

### Metadata replication {#metadata-replication}

Updates to a high availability namespace record are replicated across regions.
This includes configurations such as retention periods, Search Attributes, and other settings, 
This process ensures that all regions will eventually share a consistent and unified view of the namespace metadata.

:::info
- A namespace failover, which involves changing the "active region" field of a Namespace record, is an update.
  It will be replicated via the same namespace metadata mechanism.

:::

### Workflow execution replication {#workflow-execution-replication}

Certain Workflow operations are limited to the active region:

* Workflows in a multi-region namespace can only be mutated in the active region.
<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Q: Is there a better way to explain what "mutated" means?</span>
* Workflow Tasks and Activity Tasks are only dispatched from the active region, and thus forward progress will only be made there.

This means that certain requests, such as Start Workflow and Signal Workflow can only be processed in the active region.

Standby regions may receive API requests from Clients and Workers.
They automatically forward these requests to the active cluster for execution.

This feature provides an “all-active” experience for Temporal users.
It helps ensure there's no downtime during Namespace failover.
There's a short time window from when a standby region becomes the active region to when Clients and Workers receive a DNS update.
During this time requests forward from the now passive active region to the active standby region.

As Workflow Executions progress and are operated on, replication tasks created in the active region are dispatched to the standby region.
The processing of these replication tasks ensures that the standby region undergoes the same state transitions as the active region.
This enables the replicated tasks to synchronize and achieve the same state.

Standby regions do not distribute Workflow or Activity Tasks.
Instead, they perform verification tasks to confirm that intended operations are executed and Workflows reach the desired state.
This mechanism ensures consistency and reliability in the replication process across Temporal regions.

### Conflict Resolution {#conflict-resolution}

High availability namespaces rely on asynchronous event replication across Temporal regions.
In the event of a non-graceful failover, replication lag may result in a temporary setback in workflow progress.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Is there a good link for "at most once" and "at least once" semantics? A Kafka source? https://docs.confluent.io/kafka/design/delivery-semantics.html?</span>

Single-region Namespaces, which can provide _at-most-once_ semantics for the execution of Activities (when [Maximum Attempts](https://docs.temporal.io/retry-policies#maximum-attempts) is set to 0).
High availability namespaces can only provide _at-least-once_ semantics for execution of Activities.
Completed Activities _may_ be dispatched again in the newly active region, leading to repeated executions.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>I removed "This implies", but I think there's something missing here</span>

When a Workflow Execution is updated in a new region following a failover, events from the previous cluster arriving post-failover cannot be directly applied.
At this point, Temporal Cloud forks the Workflow History.
It creates a new branch history for execution, and begins the conflict resolution process.

The Temporal Service ensures that workflow histories remain valid and are replayable by SDKs post-failover or after conflict resolution.
This capability is crucial for workflows to continue to make forward progress.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>I did not include the pricing section; Should it be here? Should namespaces (and/or high-availability) be uppercased now that we're talking about programmatic and UI customization? I AM ROUGHING OUT THIS SECTION.
I am still deciding how to best frame it.</span>

## Pricing {#pricing}

## Manage your high-availability namespaces {#management}

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Better intro needed</span>

Temporal enables you to create and manage your high-availability namespaces using the Temporal Cloud Web UI interface, the command line 'tcld' CLI utility, and by issuing API commands.

This section provides how-to instructions for the following tasks:

* [Create high availability namespaces](/cloud/high-availability#create)
* [Upgrade single-region namespaces to high availability](/cloud/high-availability#add-regions)
* [Discontinuing high-avaiability](/cloud/high-availability#discontinuing)

### Create high-availability namespaces {#create}

The following sections show how to create high-availability namespaces.
High availability provides multi-region deployment backed by Temporal's data replication and active-standby features.

**Remember**: namespace pairing is limited to regions within the same continent.

#### Temporal Cloud Web UI

During Namespace creation, specify the first region for the Namespace to be created in.
Then select the “upgrade to a high-availability namespace” option.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Question: Will there be a confirmation step? If so, should this be presented as a numbered or bulleted task list? Another question: the original write-up still refers to multi-region; Will the WebUI be updated? I used high-availability here but this needs to match reality.</span>

#### Temporal 'tcld' CLI

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Correct? Does the order matter? Will the first region always be the primary/active one?</span>

Enter the following command at your command line.
Include both regions to add by specifying the [region codes](/cloud/service-availability).

```
tcld namespace create --region <region list> 
```

The utility responds:

```
[y/n] Adding a standby region improves availability and increases the cost.
Do you want to proceed?
```

Confirm with "y" to continue.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Then what happens? Guessing here:</span>

Temporal cloud will establish the new high availability namespace and confirm its details:

```
[detail information that does not yet exist]
```
<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>detail information that does not exist</span>


#### API calls

Use [`AddNamespaceRegion`](https://github.com/temporalio/api-cloud/pull/19) to add additional Namespace regions to an existing Namespace.

Include a fully configured <span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>no link `AddNamespaceRegionRequest`</span>.
Specify the active and standby regions.
The service returns <span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>no link `AddNamespaceRegionResponse `</span>.


<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Some sort of code sample here</span>.

```
Some sort of code sample here? Or a link to the reference docs with a proper code sample?
```

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Also (but probably reference docs that do not belong here):</span>

* <span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>FailoverNamespace</span>
* <span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>GetNamespaceFailoverHistory</span>
* etc

### Upgrade single-region namespaces to high availability {#add-regions}


The following sections show you how to upgrade an existing namespace to take advantage of high availability's push-button multi-region service.

#### Temporal Cloud Web UI

To upgrade an existing Namespace to a multi-region namespace:

1.
Visit Temporal Cloud [Namespaces](https://cloud.temporal.io/namespaces) in your Web browser
1.
Navigate to the Namespace details page
1.
Select the “Upgrade Namespace” button
1.
Select the standby region you want to add to this Namespace

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Screen shots? More specific wording and feedback? Probably a last second update when the details are more stable; plus they can be follow-up ticketed</span>

You will see an estimated time for replication.
This time is based on your selection and the size and scale of Workflows in your namespace, 

After you trigger the upgrade process, you can monitor the status of the globalization process in the UI.
The timestamp indicates how much time is left remaining for replication to complete.
The time can range between a few minutes to a few days (at the extreme).

You don’t need to monitor this in real-time.
Once your multi-region namespace is ready, you will receive an email alerting you.
All global admins are notified this way.

#### Temporal 'tcld' CLI

At the command line, enter:

```
tcld namespace add --region <region list>
```

The utility responds:

```
[y/n] Adding a standby region improves availability and increases the cost.
It will take an estimated <x amount of time> for this operation.
Do you still want to proceed?
```

Confirm with "y".

To check the status of your upgrade, issue the following command.
This command returns the status of the multi-region namespace and how much time remains for globalization to complete.

```
tcld namespace get --namespace <namespace_id>
```

As with WebUI upgrades, once your multi-region namespace is ready, all global admins will receive an email update.

#### API calls

See [`AddNamespaceRegion`](https://github.com/temporalio/api-cloud/pull/19)
<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Fill this in like the API section in 'create';</span>

### Discontinuing high availability service {#discontinuing}

Disabling high availability removes the multi-region availability and automatic failover features that represents Temporal's highest level of service recovery.
To disable the feature and end charges, users must contact Temporal directly.
Charges will stop once this decomissioning procedure complete.
It is on our roadmap to automate this process.

* Customers making this request must let us know which region you want the namespace to land in after it is de-globalized.
* If you cease services in the middle of the month, your namespace ceases being global within 1 business day.
* Temporal will not retain replicated data in the standby region once high availability has been disabled.
* After disabling high availability, there is a wait time of 7 days before we can re-enable the feature for a given namespace.

## Operations

This section provides how-to instructions for the following operations tasks:

* [Trigger failovers](/cloud/high-availability#triggering-failovers)
* [Monitoring and observability](/cloud/high-availability#observability)

### Triggering failovers {#triggering-failovers}

At times, you may face issues of network latency
Under this and other region-specific pressures you can decide to manually  trigger a failover.
These instructions show you how to perform this action and move your active namespace to the standby region.

After any failover, whether triggered by you or by Temporal, information about the event appears in both the [Temporal Cloud WebUI](https://cloud.temporal.io/namespaces) on the Namespace detail page and in your audit logs.

You don’t need to monitor this in real-time.
Whenever there is a failover event, all global admins receive an alert email.

More information is available in [Monitoring and Observability](/cloud/high-availability#observability).

#### Temporal Cloud Web UI

Visit the [Namespace WebUI page](https://cloud.temporal.io/namespaces).
Navigate to the namespace details page and click the menu option to “Trigger a failover”.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>More details; screenshot maybe? Specific wording?</span>

#### Temporal 'tcld' CLI

To manually trigger a fall-over, issue the following from your command line:

```
tcld namespace failover --namespace <namespace_id> --target_region <region>
```

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Response? Specific wording? tcld command to fetch details to confirm new active and standby settings?</span>

#### API calls

[`GetNamespaceFailoverHistory`](https://github.com/temporalio/api-cloud/pull/19)

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>To be filled in</span>

### Monitoring and observability {#observability}

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>STOPPING DRAFT HERE FOR THE DAY</span>

Within the UI, CLI, and API for a multi-region Namespace, users can view and alert on key cloud metrics.

During the process of adding a region to a Namespace, users can see the progress of Workflow replication. Errors—if any—will also be surfaced in the UI. 

There is also information available in the UI and API to monitor and keep track of failovers. Users can see start time, source and destination region, who initiated the failover, duration of the failover event, and any additional context that may be available. 

There is continuous visibility into the replication lag in seconds and this can be viewed in external metrics. 
You will also notice that multi-region namespace shows 2x the Action count in temporal_cloud_v0_total_action_count. This is due to replication. 

### Auditing operational events {#auditing}

In the event of a failover triggered by Temporal, users are notified that the failover has happened via the audit log. Users can set alerts when a failover event is triggered (if done so by Temporal).

The audit log contains information about failovers once triggered, specifically "operation": "FailoverNamespaces" in the logs. After the failover, users will be able to see in the UI that the namespace is active in the new region. 

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>From doc: editorial note: include this section in the audit log section of docs</span>

### Worker Deployment

After enabling the multi-region namespace feature, there is no additional worker configuration needed. If there is a failover event to the standby region, the DNS redirection orchestrated by Temporal ensures that your existing workers can continue to poll the namespace. More details are available in the section Routing below. It is important to note that workers would be communicating cross-region in this scenario.

However, in case of a complete regional outage, your Workers in that region could go down as well. If you wish your Workflows to progress during the outage, you need to have a redundant set of Workers in the standby region. 

### Routing

If you are not using PrivateLink, this feature is completely transparent to you. You don’t need to make any changes on your end. 

How it works: When the multi-region namespace feature is enabled, we replace the namespace DNS record 

```
<ns>.<acct>.<tmprl_domain>
```

with a CNAME to a regional DNS record in the format 

```
<region>.region.<tmprl_domain>
```

This regional DNS record will live in a subzone: 

```
region.<tmprl_domain>
```

Clients resolving the namespace’s DNS record will thus be directed to a regional DNS record. 

During a failover, we change the target of the namespace DNS record from one region to another. Using a CNAME record also allows us to support a lower TTL for the record (configured at 15 seconds). As a rule of thumb, DNS reconciliation is not expected to take more than 2x the TTL, leading to at most a 30-second delay for clients to converge to the newly targeted region.

#### For PrivateLink customers

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>ADD IMAGE</span>

Depending on your networking setup and use of PrivateLink, there may be additional configuration changes you need to make. These include but are not limited to setting override DNS and ensuring network connectivity between the two regions.

How it works: The regional DNS needs to be reached through IP addresses local to your network. As the CNAME for the namespace record is public, PrivateLink clients also know which region is currently active. Using a subzone for 

```
region.<tmprl_domain>
```

you can override the regional DNS and make sure traffic is routed internally. 

To set up the DNS override, you can override specific regions to target the relevant IP addresses (e.g. aws-us-west-1.region.tmprl.cloud to target 192.168.1.2). Using AWS, this can be done using a private hosted zone in Route53 for 

```
region.<tmprl_domain>
```

and linking that private zone to the VPCs you use for Workers. When your Workers connect to the Namespace, they first resolve the

```
 <ns>.<acct>.<tmprl_domain>
 ```
 
record, which then targets 

```
<active>.region.<tmprl_domain>
```using a CNAME, leading traffic to reach the internal IP you are using.

You also need to consider how to configure Workers to run in this scenario. One option is to have Workers running in both regions at all times. Another option is to establish connectivity between the regions to redirect Workers once failover occurs.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>ANY OTHER LINKS, READ MORE, etc?</span>