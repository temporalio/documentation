---
id: audit-logging-gcp
title: Audit Logging - GCP Pub/Sub
sidebar_label: GCP Pub/Sub
description: Audit Logging in Temporal Cloud provides forensic information, integrating with GCP Pub/Sub for secure data handling and supporting key Admin and API Key operations. This streamlines audit and compliance processes.
draft: false
slug: /cloud/audit-logging-gcp
toc_max_heading_level: 4
keywords:
  - audit logging
  - explanation
  - how-to
  - operations
  - temporal cloud
  - term
  - troubleshooting
  - gcp
  - pubsub
tags:
  - GCP
  - Logging
  - Temporal Cloud
---

import * as Components from '@site/src/components';

## Manual Setup Prerequisites

:::note

These steps are only required for manual setup.
If you use Terraform for your deployment, you don't need to complete these prerequisites.

:::

Before configuring the manual Audit Log sink, complete the following steps in Google Cloud:

1. Create a Pub/Sub topic and make a note of its topic name, such as `test-auditlog`.
1. Set up a service account in the same project in Google Cloud.
1. If you are using the UI, follow the instructions in the Temporal Cloud UI to configure the permissions for that service account.
1. If you are using the API, you should set up the permissions as follows, or use the [Terraform Module](https://github.com/temporalio/terraform-modules/tree/main/modules/auditlog-sa):
   - Grant the role **Pub/Sub Publisher** to the service account from the PubSub topic.
   - To set up the trust relationship, grant the role **Service Account Token Creator** to the following service accounts. Replace `{account_id}` with your Temporal Cloud account ID.
      - auditlog-`{account_id}`@prod-vs4padk9dkczcey6d6st9c58e.iam.gserviceaccount.com
      - auditlog-`{account_id}`@prod-sbe56h6wr4sykaw47a6yg4h66.iam.gserviceaccount.com
      - auditlog-`{account_id}`@prod-97gr6tp6zkv2t4epubffpz7kt.iam.gserviceaccount.com
      - auditlog-`{account_id}`@prod-cAcqaqgbfzy23vpzkbxzrx378.iam.gserviceaccount.com
      - auditlog-`{account_id}`@prod-79z2c6d76au6g5fcq768buqf9.iam.gserviceaccount.com
   - To verify the above is set up correctly, you may use the **ValidateAccountAuditLogSink** API call.


## Create an Audit Log sink

1. In the Temporal Cloud UI, select **Settings**.
1. On the **Settings** page, select **Audit Logging**.
1. In the **Audit Logging** card, select **Setup Audit Log Integration**.
1. On the Set Up Audit Log Integration page, select **Pub/Sub**.
1. In the **service account email** field, enter the email of the service account you created in the prerequisites.
1. In the **Topic name** field, enter the topic name of the Pub/Sub topic you created in the prerequisites.
1. There are two ways to configure the service account to write to the Pub/Sub sink: select **Manual** to configure the account manually, or **Deploy with Terraform** to use Terraform.
   If you use Terraform, you don't need to complete the prerequisite steps above.
1. Follow the instructions in the Temporal Cloud UI for the method you chose.
1. To ensure that audit logs can reach your Pub/Sub topic, you can use the **Verify** button to confirm it is set up correctly. This validates that Temporal can successfully write to your topic.
If everything is configured correctly, you will see a `Success` status indicating Temporal has written to the Pub/Sub topic.
1. Click **Create** to configure the audit log.
   Audit logs will begin to show up in Pub/Sub within 10 minutes 

![Temporal Cloud UI Setup for Audit Logging with GCP Pub/Sub](/img/cloud/gcp/audit-logging-pub-sub-gcp.png)

:::info MORE INFORMATION

For more details, refer to [Audit Logging with Temporal Cloud](https://docs.temporal.io/cloud/audit-logging).

:::
