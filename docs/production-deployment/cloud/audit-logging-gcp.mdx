---
id: audit-logging-gcp
title: Audit Logging - GCP Pub/Sub
sidebar_label: GCP Pub/Sub
description: Audit Logging in Temporal Cloud provides forensic information, integrating with GCP Pub/Sub for secure data handling and supporting key Admin and API Key operations. This streamlines audit and compliance processes.
draft: true
slug: /cloud/audit-logging-gcp
toc_max_heading_level: 4
keywords:
  - audit logging
  - explanation
  - how-to
  - operations
  - temporal cloud
  - term
  - troubleshooting
  - gcp
  - pubsub
tags:
  - audit-logging
  - explanation
  - how-to
  - operations
  - temporal-cloud
  - term
  - troubleshooting
  - gcp
  - pubsub
---

import * as Components from '@site/src/components';

## Prerequisites

Before configuring the Audit log sink, complete the following steps in Google Cloud:

1. Create a Pub/Sub topic and make a note of its topic name, for example, "test-
   auditlog"
   1. If you wish to enable customer-managed encryption keys (CMEK), do so.
2. Set up a service account in the same project in Google Cloud that trusts the Temporal internal
   service account to let Temporal write information to your Google Cloud account.

There are two ways to set up this service account:

- **Manually:**
  1. Grant GCS permission: Navigate to your Pub/Sub topic, go to the Permission section, and grant
     `roles/pubsub.publisher` to your newly created service account.
  2. Grant permission to your Temporal service accounts: Navigate to your Service Account page, go
     to the Permissions section, and grant `roles/iam.serviceAccountTokenCreator` to the following
     Temporal Service accounts:
  - auditlog-temporal-dev@test-zt5hvyyfbyfb2tsew2k3fpe5h.iam.gserviceaccount.com
  - auditlog-temporal-dev@test-3gd87drvpffdafs45kgqqsxfu.iam.gserviceaccount.com
- **With Terraform:**
  1. Use the [Terraform template](https://github.com/temporalio/terraform-modules/tree/main/modules/gcp-sink-sa)
     to create the service account

## Set up audit logging in the Temporal Cloud UI

To set up audit logs integration from the Temporal Cloud UI, follow these steps:

1. In the Cloud UI, navigate to Settings → Integration → Audit Log. Confirm that you see Pub/Sub as a sink option:

![Temporal Cloud UI Setup for Audit Logging with GCP Pub/Sub](/img/cloud/gcp/audit-logging-pub-sub-gcp.png)

2. Choose Pub/Sub as the external provider.
3. Enter the Service account email that you noted earlier.
4. Enter the Pub/Sub topic name that you noted earlier.
5. Click **Create** to configure the audit log. This may take a few minutes.

## More information

For more details, see the documentation on [audit logging](https://docs.temporal.io/cloud/audit-logging).
