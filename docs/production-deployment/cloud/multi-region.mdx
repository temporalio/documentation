---
id: multi-region
slug: /cloud/multi-region
title: Multi-region Namespaces
sidebar_label: Multi-region Namespaces
sidebar_position: 5
tags:
  - multi-region
  - multi-region namespace
  - high-availability
  - failover
  - availability
  - namespaces
---

:::tip Support, stability, and dependency info
- Multi-region Namespaces are in [Public Preview](/temporal/release-stages#public-preview) for Temporal Cloud.

:::

Temporal Cloud's multi-region Namespace feature adds push-button high availability for your Temporal Service.
This feature enables you to choose a standby region for a Temporal Cloud Namespace.
The service handles the complexity of replicating data from the active region to the standby region and transferring control to the standby region when needed.

This means your standby region is available and in sync with the active region.
It's ready to take over in the event of network service and performance issues in the active region.
For these reasons, this feature provides Temporal Cloud's highest levels of service availability.

This feature guide covers the following topics:

- [Why choose a multi-region Namespace?](/cloud/multi-region#multi-region-intro)
- [Understanding failovers](/cloud/multi-region#failovers)
- [Multi-region Namespace SLA](/cloud/multi-region#sla)
- [Multi-region Namespace architecture overview](/cloud/multi-region#architecture)
- [Pricing](/cloud/multi-region#pricing)
- [Manage your multi-region Namespace](/cloud/multi-region#management)

## Why choose a multi-region Namespace? {#multi-region-intro}

A high availability multi-region Namespace provides a single endpoint for a multi-region service.
This option offers a single logical Namespace that runs in two physical regions, one active and one standby.
As Workflows progress in the active region, history events are asynchronously replicated to the standby region.

In case of an incident or outage in the active region, Temporal Cloud will "failover" to the standby region.
A failover means to switch the roles of the active and standby regions.
These failovers enable existing Workflow Executions to keep running and new Executions to be initiated.

In the traditional definition of active/active replication, multiple nodes serve requests and accept writes simultaneously with strong synchronous data consistency.
A Temporal Cloud multi-region Namespace enables two replicated Namespaces (one active, one standby) to accept requests, but not simultaneously.
Requests are accepted, and Workflow history events are written to the active region and then asynchronously replicated to the standby region.

Before failover            |  After failover
:-------------------------:|:-------------------------:
![Before failover](/img/multi-region/before-failover.png)  |  ![After failover](/img/multi-region/after-failover.png)

For a single-region Namespace, Temporal Cloud provides 99.99% availability and its contractual service level agreement ([SLA](https://docs.temporal.io/cloud/sla)) offers a 99.9% guarantee against service errors.
For many applications, this provides sufficient availability.
With this strategy, Temporal clients connect to a single Namespace in one deployment region.
This approach works well for workloads that don't require stringent availability guarantees.

A multi-region Namespace supports standby recovery.
To enable this feature, simply add an additional region to a Namespace.
Temporal Cloud takes care of the Namespace replication to your new standby region.
In the event of a regional failure, Temporal Cloud automatically fails over the Namespace to the secondary region. 
When faced with network latency or other region-wide issues, you can manually trigger a failover.

Advantages of using a Multi-region Namespace:

* No manual deployment or configuration needed, simple push button operation.
* Open workflows continue in in the standby region with minimal interruption and data loss.
* No changes required to workers and workflow starter code in setup and failover.
* 99.99% Contractual SLA.

## Understanding failovers {#failovers}

Consider an incident or outage that leads to elevated error rates or latency in the active region of a multi-region Namespace.
Under these circumstances, Temporal Cloud will initiate a Namespace failover operation.
This operation shifts Workflow processing to a standby region, unaffected by the incident.
This allows both existing Workflows to progress and new Workflows to be created as the incident is addressed.

:::info
- Customers who wish to test the set-up of their multi-region Namespace can manually trigger failovers using the UI page, the 'tcld' CLI utility, or code their own solutions using our APIs.
For most scenarios, we recommend you let Temporal handle failovers for you.

:::

### Replication lag {#replication-lag}

When using a multi-region Namespace, the replication between regions is asynchronous.
Updates to the workflow in the active region, and the history events associated with it, are applied to the standby region with a short delay.
This delay is called the replication lag.
Temporal Cloud aims to provide a P95 replication delay of less than 1 minute.
A P95 delay means 95% of requests are handled faster than this limit.

Replication lag means a [forced failover](/cloud/multi-region#forced-failover) might cause workflows to rollback in progress or cause recently started Workflows to be absent until the region recovers.
Temporal event versioning and [conflict resolution mechanisms](/cloud/multi-region#conflict-resolution) ensure that the eventual history of the Workflow can be replayed by the SDK.
Critical operations like Signals won't get lost.

### Failover scenarios

The Temporal Cloud failover mechanism supports several modes to execute Namespace failovers.
These modes include graceful failover ("handover"), forced failover, and a hybrid mode.
The hybrid mode is the default behavior.

#### Graceful failover (handover) {#graceful-failover}

In this mode, replication tasks are fully processed and drained.
Traffic to the Namespace is paused before the failover to ensure no loss of progress or data conflicts.
This approach may result in a short period of unavailability with a default value of 10 seconds.

During this period, existing Workflows will stop progress.
That means state transitions will not happen and tasks will not be dispatched.
User requests like start/signal workflow will be rejected as operations are paused during handover.

This mode favors _consistency_ over availability.

#### Forced failover {#forced-failover}

In this mode, a Namespace is immediately activated in the standby region.
Events not yet replicated due to [replication lag](/cloud/multi-region#replication-lag) will undergo [conflict resolution](/cloud/multi-region#conflict-resolution) upon reaching the new active region.

This mode prioritizes _availability_ over consistency.

#### Hybrid failover mode {#hybrid-failover}

While graceful failovers are normally preferred for consistency, they are not always practical.
The hybrid failover mode (the default mode) limits graceful failover attempts to 10 seconds or less.
If the graceful approach does not resolve the issue, Temporal Cloud automatically switches to a forced failover.
This strategy balances consistency and availability requirements.

See the sections on [triggering a failover](/cloud/multi-region#triggering-failovers), [Worker deployment](/cloud/multi-region#worker-deployment), and [routing](/cloud/multi-region#routing) for more information.

## Multi-region Namespace SLA {#multi-region-sla}

Multi-region Namespaces offer 99.99% availability.
This is enforced by an SLA on [service error rates](https://docs.temporal.io/cloud/sla).
Our system is designed to limit data loss after recovery when the incident triggering the failover is resolved.

Our recovery point objective ([RPO](https://en.wikipedia.org/wiki/Disaster_recovery#Recovery_Point_Objective)) is near-zero.
There may be a short period of time—the [replication lag](/cloud/multi-region#replication-lag)—during the incident when some data may be unavailable.
If the active region is unable to reach the standby region, the data will be unavailable until the network issue is fixed and data has finished replicating.

We've designed Temporal Cloud to proactively respond to incidents by triggering failovers.
Our recovery time objective ([RTO](https://en.wikipedia.org/wiki/Disaster_recovery#Recovery_Time_Objective)) is 20 minutes or less per incident.
We aim to reduce this RTO in the future.

:::info
- During a disaster scenario in which the data on the hard drives in the active region are not recoverable, the duration of data loss can be as high as the replication lag at the time of disaster.

:::

### Regional availability {#regional-availability}

Multi-region Namespaces are available in all existing [Temporal Cloud regions](/cloud/service-availability#regions).

:::tip
- Namespace pairing is limited to regions within the same continent.
South America is excluded as only one region is available.
:::

## Multi-region Namespace architecture overview {#architecture}

Multi-region Namespaces enable replication of Namespace metadata and Workflow Executions across connected regions.
This redundancy, plus the added failover capability, provides measurable stability when dealing with outages.

A multi-region Namespace is normally in a single region at any moment.
The passive region assumes a standby role.
The only exception occurs in the event of a <a href="https://en.wikipedia.org/wiki/Network_partition">network partition</a>.

In this event, an operator may elect to promote a standby region to active status.
Be aware that this action will temporarily result in both regions being active.
Once the network partition is resolved and communication between the regions is restored, a conflict resolution algorithm determines which region continues as the active one.
This ensures only one region remains active.

### Metadata replication {#metadata-replication}

Updates to a multi-region Namespace record are replicated across regions.
This includes configurations such as retention periods, Search Attributes, and other settings, 
This process ensures that all regions will eventually share a consistent and unified view of the Namespace metadata.

:::info
- A Namespace failover, which involves changing the "active region" field of a Namespace record, is an update.
  It will be replicated via the same Namespace metadata mechanism.

:::

### Workflow execution replication {#workflow-execution-replication}

Certain Workflow operations are limited to the active region:

* Workflows in a multi-region Namespace can only be updated in the active region.
* Workflow Tasks and Activity Tasks are only dispatched from the active region, and thus forward progress will only be made there.

These limits mean that certain requests, such as Start Workflow and Signal Workflow can only be processed in the active region.
Standby regions may receive API requests from Clients and Workers.
They automatically forward these requests to the active cluster for execution.

Multi-region Namespaces provide an “all-active” experience for Temporal users.
This helps limit or eliminate downtime during Namespace failover.
There's a short time window from when a standby region becomes the active region to when Clients and Workers receive a DNS update.
During this time requests forward from the now passive active region to the active standby region.

As Workflow Executions progress and are operated on, replication tasks created in the active region are dispatched to the standby region.
The processing of these replication tasks ensures that the standby region undergoes the same state transitions as the active region.
This enables the replicated tasks to synchronize and achieve the same state.

Standby regions do not distribute Workflow or Activity Tasks.
Instead, they perform verification tasks to confirm that intended operations are executed and Workflows reach the desired state.
This mechanism ensures consistency and reliability in the replication process across Temporal regions.

### Conflict Resolution {#conflict-resolution}

Multi-region Namespaces rely on asynchronous event replication across Temporal regions.
In the event of a non-graceful failover, replication lag may result in a temporary setback in workflow progress.

Single-region Namespaces, which can provide _at-most-once_ semantics for the execution of Activities (when [Maximum Attempts](https://docs.temporal.io/retry-policies#maximum-attempts) is set to 0).
Multi-region Namespaces can only provide _at-least-once_ semantics for execution of Activities.
Completed Activities _may_ be dispatched again in the newly active region, leading to repeated executions.

When a Workflow Execution is updated in a new region following a failover, any events from the previously active region that arrive after the failover can't be directly applied.
At this point, Temporal Cloud has forked the Workflow History.

It creates a new branch history for execution, and begins its conflict resolution process.
The Temporal Service ensures that workflow histories remain valid and are replayable by SDKs post-failover or after conflict resolution.
This capability is crucial for workflows to continue to make forward progress.

## Pricing {#pricing}

For pricing details, please visit our [Pricing page](/cloud/pricing).

## Manage your multi-region Namespace {#management}

Temporal enables you to create and manage your multi-region Namespace using the Temporal Cloud Web UI, the command line 'tcld' CLI utility, and by issuing API commands.
Use the following capabilities to create, upgrade, and discontinue your multi-region Namespace.

* [Create a multi-region Namespace](/cloud/multi-region#create)
* [Upgrade a single-region Namespace to multi-region](/cloud/multi-region#add-regions)
* [Discontinuing multi-region service](/cloud/multi-region#discontinuing)

:::tip
- While reading through this coverage, remember that pairing is limited to regions within the same continent.

:::
### Create a multi-region Namespace {#create}

The following sections show how to create a multi-region Namespace.
This provides multi-region deployment backed by Temporal's data replication and active-standby features.

#### Temporal Cloud Web UI

During Namespace creation, specify the first region for the Namespace to be created in.
Then select the “upgrade to a multi-region Namespace” option.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Question: Will there be a confirmation step? If so, should this be presented as a numbered or bulleted task list? Another question: the original write-up still refers to multi-region; Will the WebUI be updated?</span>

#### Temporal 'tcld' CLI

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Correct? Does the order matter? Will the first region always be the primary/active one?</span>

Enter the following command at your command line.
Include both regions to add by specifying the [region codes](/cloud/service-availability).

```
tcld namespace create --region <region list> 
```

The utility responds:

```
[y/n] Adding a standby region improves availability and increases the cost.
Do you want to proceed?
```

Confirm with "y" to continue.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Then what happens? Guessing here:</span>

Temporal cloud will establish the new multi-region Namespace and confirm its details:

```
[detail information that does not yet exist]
```

#### API calls

Use [`AddNamespaceRegion`](https://github.com/temporalio/api-cloud/pull/19) to add additional Namespace regions to an existing Namespace.

Include a fully configured <span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>no link `AddNamespaceRegionRequest`</span>.
Specify the active and standby regions.
The service returns <span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>no link `AddNamespaceRegionResponse `</span>.

### Upgrade a single-region Namespace to multi-region {#add-regions}
The following sections show you how to upgrade an existing Namespace to take advantage of multi-region's push-button high availability service.

#### Temporal Cloud Web UI

To upgrade an existing Namespace to a multi-region Namespace:

1. Visit Temporal Cloud [Namespaces](https://cloud.temporal.io/namespaces) in your Web browser
1. Navigate to the Namespace details page
1. Select the “Upgrade Namespace” button
1. Select the standby region you want to add to this Namespace

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Screen shots? More specific wording and feedback? Probably a last second update when the details are more stable; plus they can be follow-up ticketed</span>

You will see an estimated time for replication.
This time is based on your selection and the size and scale of Workflows in your Namespace, 

After you trigger the upgrade process, you can monitor the status of the globalization process in the UI.
The timestamp indicates how much time is left remaining for replication to complete.
The time can range between a few minutes to a few days (at the extreme).

You don’t need to monitor this in real-time.
Once your multi-region Namespace is ready, you will receive an email alerting you.
All global admins are notified this way.

#### Temporal 'tcld' CLI

At the command line, enter:

```
tcld namespace add --region <region list>
```

The utility responds:

```
[y/n] Adding a standby region improves availability and increases the cost.
It will take an estimated <x amount of time> for this operation.
Do you still want to proceed?
```

Confirm with "y".

To check the status of your upgrade, issue the following command.
This command returns the status of the multi-region Namespace and how much time remains for globalization to complete.

```
tcld namespace get --namespace <namespace_id>
```

As with WebUI upgrades, once your multi-region Namespace is ready, all global admins will receive an email update.

#### API calls

See [`AddNamespaceRegion`](https://github.com/temporalio/api-cloud/pull/19)
<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Fill this in like the API section in 'create';</span>

### Discontinuing multi-region service {#discontinuing}

Disabling multi-region removes the high availability and automatic failover features that provide Temporal's highest level of regional service recovery.
To disable the feature and end charges, users must contact Temporal directly.
Charges will stop once this decommissioning procedure complete.
It is on our roadmap to automate this process.

* When making this request you must let us know which region you want the Namespace to land in after it is de-globalized.
* If you cease services in the middle of the month, your Namespace removes multi-region features within 1 business day.
* Temporal won't retain replicated data in the standby region once multi-region has been disabled.
* After disabling multi-region, a wait time of 7 days applies before we can re-enable the feature for a given Namespace.

## Operations

This section provides how-to instructions for the following operations tasks:

* [Trigger failovers](/cloud/multi-region#triggering-failovers)
* [Monitoring and observability](/cloud/multi-region#observability)

### Triggering failovers {#triggering-failovers}

At times, you may face issues of network latency
Under this and other region-specific pressures you can decide to manually  trigger a failover.
The following sections show you how to perform this action and move your active Namespace to the standby region.
You'll also read about what to expect after a failover.

#### Temporal Cloud Web UI

Visit the [Namespace WebUI page](https://cloud.temporal.io/namespaces).
Navigate to the Namespace details page and click the menu option to “Trigger a failover”.

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>More details; screenshot maybe? Specific wording?</span>

#### Temporal 'tcld' CLI

To manually trigger a fall-over, issue the following from your command line:

```
tcld namespace failover --namespace <namespace_id> --target_region <region>
```

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>Response? Specific wording? tcld command to fetch details to confirm new active and standby settings?</span>

#### API calls

[`GetNamespaceFailoverHistory`](https://github.com/temporalio/api-cloud/pull/19)

<span style={{ backgroundColor: 'rgb(255, 255, 102)', fontWeight: 'bold' }}>To be filled in</span>
#### After the failover
After any failover, whether triggered by you or by Temporal, information about the event appears in both the [Temporal Cloud WebUI](https://cloud.temporal.io/namespaces) on the Namespace detail page and in your audit logs.
You don’t need to monitor this in real-time.
Whenever there is a failover event, all global admins receive an alert email.

More information is available in [Monitoring and Observability](/cloud/multi-region#observability).

### Monitoring and observability {#observability}

You can view and alert on key cloud metrics using the Web UI, the 'tcld' CLI utility, and our Cloud APIs.
For example, during the process of adding a region to a Namespace, you can see the progress of Workflow replication.
Errors—if any—will also surface in the Namespace UI.

You'll also find information in the UI and API to monitor and keep track of failovers.
You can monitor the start time, source and destination region, the individual who initiated the failover, the duration of the failover event, and any additional context that may be available.
There is continuous visibility into the replication lag in seconds and this can be viewed in external metrics.

You will also notice that multi-region Namespace shows twice (2x) the Action count in `temporal_cloud_v0_total_action_count`.
This doubling happens due to regional replication.

### Auditing operational events {#auditing}

When Temporal triggers failovers, you're notified that the failover has happened via the audit log.
You can also set alerts for Temporal-initiated failover events.

The audit log contains information about failovers once triggered. You'll find "operation": "FailoverNamespaces" in the logs.
After a failover, you can check that the Namespace is active in the new region using the Temporal Cloud Web UI.

### Worker Deployment {#worker-deployment}

After enabling the multi-region Namespace, you don't need to further configure your Workers.
When a Namespace fails over to the standby region, the DNS redirection orchestrated by Temporal ensures that your existing workers can continue to poll the Namespace without interruption.
More details are available in the [Routing](/cloud/multi-region#routing) section below.

:::info
- When a Namespace fails over to a standby region, Workers will be communicating cross-region.

- In case of a complete regional outage, Workers in the original region may go down as well as the original Namespace. 
  To keep Workflows moving during this level of outage, deploy a redundant set of Workers to your standby region.

:::

### Routing {#routing}

Routing is completely transparent to multi-region customers unless they use PrivateLink.

For non-PrivateLink use, you won’t need to make any changes on your end.
When the multi-region Namespace feature is enabled, we replace the Namespace DNS record `<ns>.<acct>.<tmprl_domain>` with a CNAME to a regional DNS record in the format `<region>.region.<tmprl_domain>`.

This regional DNS record will live in a subzone: 

```
region.<tmprl_domain>
```

Clients resolving the Namespace’s DNS record are directed to a regional DNS record.

During a failover, we change the target of the Namespace DNS record from one region to another.

Using a CNAME record also allows us to support a lower <a href="https://en.wikipedia.org/wiki/Time_to_live">TTL</a> for the record (configured at 15 seconds).
As a rule of thumb, DNS reconciliation is not expected to take more than twice (2x) the TTL, leading to at most a 30-second delay for clients to converge to the newly targeted region.

#### For PrivateLink customers

Depending on your networking setup and use of PrivateLink, you may need to change certain configurations.
These include but are not limited to setting override DNS and ensuring network connectivity between the two regions.

![Customer side solution example](/img/multi-region/private-link.png)

**How it works**: 
The regional DNS needs to be reached through IP addresses local to your network.
As the CNAME for the Namespace record is public, PrivateLink clients also know which region is currently active.
Using a subzone for `region.<tmprl_domain>` you can override the regional DNS and make sure traffic is routed internally.

To set up the DNS override, you can override specific regions to target the relevant IP addresses (e.g. aws-us-west-1.region.tmprl.cloud to target 192.168.1.2).
Using AWS, this can be done using a private hosted zone in Route53 for `region.<tmprl_domain>`.
Link to that private zone to the VPCs you use for Workers.

When your Workers connect to the Namespace, they first resolve the ` <ns>.<acct>.<tmprl_domain>` record, which then targets `<active>.region.<tmprl_domain>` using a CNAME, leading traffic to reach the internal IP you're using.

Consider how you'll configure Workers to run in this scenario.
You might set Workers to run in both regions at all times.
Alternately, you could establish connectivity between the regions to redirect Workers once failover occurs.

If you have more questions or feedback about this feature, please reach out to <a href="mailto:product@temporal.io">the product team</a>.
