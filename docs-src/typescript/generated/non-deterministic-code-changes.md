---
id: non-deterministic-code-changes
title: BackgroundCheckNonDeterministic Workflow
sidebar_label: intrinsic-non-deterministic-logic
description: BackgroundCheckNonDeterministic Workflow is a non-deterministic Workflow as it uses a random number generator.
---

<!-- DO NOT EDIT THIS FILE DIRECTLY.
THIS FILE IS GENERATED from https://github.com/temporalio/documentation-samples-typescript/blob/main/chapter_durable_execution/backgroundcheck_nondeterministic/src/workflow_dacx.ts. -->

One way to produce a non-deterministic error is to use a random number to determine whether to sleep inside the Workflow.

If you run the `BackgroundCheckNonDeterministic` Workflow enough times, eventually you will see a Workflow Task failure.

<div class="copycode-notice-container"><div class="copycode-notice"><img data-style="copycode-icon" src="/icons/copycode.png" alt="Copy code icon" /> Sample application code information <img id="i-id312167780" data-event="clickable-copycode-info" data-style="chevron-icon" src="/icons/chevron.png" alt="Chevron icon" /></div><div id="copycode-info-id312167780" class="copycode-info">The following code sample comes from a working and tested sample application. The code sample might be abridged within the guide to highlight key aspects. Visit the source repository to <a href="https://github.com/temporalio/documentation-samples-typescript/blob/main/chapter_durable_execution/backgroundcheck_nondeterministic/src/workflow_dacx.ts">view the source code</a> in the context of the rest of the application code.</div></div>

```typescript
import { log, proxyActivities, sleep } from '@temporalio/workflow';
import type * as activities from './activities';

const { ssnTraceActivity } = proxyActivities<typeof activities>({
  startToCloseTimeout: '10 seconds',
});

// backgroundCheckNonDeterministic is an anti-pattern Workflow Definition
export async function backgroundCheckNonDeterministic(
  ssn: string,
): Promise<string> {
  // CAUTION, the following code is an anti-pattern showing what NOT to do
  if (getRandomNumber(1, 100) > 50) {
    await sleep('10 seconds');
  }

  log.info('Preparing to run daily report', {});

  try {
    const ssnTraceResult = await ssnTraceActivity(ssn);
    return ssnTraceResult;
  } catch (err) {
    throw err;
  }
}

function getRandomNumber(min: number, max: number) {
  let seed = 1234;
  seed = Math.floor(((seed * seed) % 10000) / 100);
  return min + (seed % (max - min + 1));
}
```
