---
id: temporal-client
title: Temporal Client - Java SDK dev guide
sidebar_label: Temporal Client
sidebar_position: 5
description: The Temporal Client section of the Temporal Developer's guide introduces Clients, features that communicate and interact with the Temporal Service.
slug: /dev-guide/java/temporal-client
toc_max_heading_level: 4
keywords:
- applications
- client
- guide-context
- java
- temporal client
- workers
tags:
- applications
- client
- guide-context
- java
- temporal-client
- workers
---

<!-- THIS FILE IS GENERATED. DO NOT EDIT THIS FILE DIRECTLY -->

Every Temporal application, whether it is a worker, a Webpage backend, or a calling application deployed on a desktop or mobile device, starts with a Client.
Provided by our SDKs, Clients are Temporal features that communicate and interact with a Temporal Cluster.

A Client is more than just a language-specific wrapper around a set of server APIs.
Each client encapsulates complex mechanisms that interact with the Temporal server.
Clients enables the Temporal Server to keep Workflow Execution state, caching, and resilience fully orchestrated.
This makes simplifies your application code and lets you focus on your business logic.

Temporal Clients are capable and flexible.
At their most basic level, Clients can initiate, signal, schedule, and query Workflow Executions, and retrieve Execution results.
They can also:

- Capture stack traces from any failed Workflow execution to support debugging.
- Handle the non-trivial process of reconstructing Client state after a failure occurs.
- And more...

## Communicating with the Temporal Server {#grpc-client-communication}

Every Temporal Cluster, Server, and Namespace uses a gRPC endpoint.
Any mechanism that sends information to the server or retrieves information from the server uses a Temporal Client and its gRPC communication.
gRPC is a Remote Procedure Call framework featuring low latency and high performance.
gRPC provides Temporal with an efficient, language-agnostic communication framework.

The Temporal Client communicates with the Temporal Server in a stateless manner through gRPC APIs.
It does not need to register itself with the Temporal service.
Stateless communication offers notable advantages.
It allows for flexibility and scalability in the execution of tasks.
It also enables the Temporal Service to decompose tasks as needed, without tying those tasks to a particular Client.

## Configuring Development Service Clients {#client}

Configuring the Development Service is built into Temporal Clients.
Clients know the service is run on localhost (127.0.0.1) using port 7233.
The default Namespace is called 'default'.
If you need to change the Namespace from 'default', customize the local service from the command-line and adjust the Client configuration in your code.

### Create a custom Namespace on the Development Service

Namespaces play an important role in Temporal, regardless of the service you're using: Temporal Cloud, the Development Service, or self-hosted Temporal Service.
When using the Development Service, you may find several people or projects using the same Cluster.
Adding custom Namespaces during development supports isolation.
It also lets you stage different configurations and separate multiple Workflow versions from each other.

To build a Namespace, issue the following command at your command line:

```
temporal operator namespace create new_custom_namespace_name
```

The utility immediately confirms the creation of the new namespace.

```
Namespace custom-namespace successfully registered.
```

### Configuring the Development Client's Namespace

In Java, you can set the namespace as an environment variable in the shell where you run your applications.
Use this to customize the `WorkflowClientOptions` with your custom Namespace.
This step is not needed when using the 'default' Namespace.

```
String namespace = System.getenv("TEMPORAL_CLOUD_NAMESPACE");  

WorkflowServiceStubs service = WorkflowServiceStubs.newLocalServiceStubs();

WorkflowClientOptions options = WorkflowClientOptions.newBuilder()  
    .setNamespace(namespace)  
    .build();

WorkflowClient client = WorkflowClient.newInstance(service, options);
```

## Connect your Client to a Temporal Development Cluster {#connect-to-a-temporal-development-service}

Working with a Temporal Development Cluster requires little effort and is easily configured. Here's an example of how you would build a new Client, and use it to establish a Worker Factory.

```
public static void startWorker(String[] args) {
    // Create a service stub
    WorkflowServiceStubs service = WorkflowServiceStubs.newLocalServiceStubs();

    // A Workflow Client can start, Signal, and Query a Workflow Execution
    WorkflowClient client = WorkflowClient.newInstance(service);

    // A Workflow Factory creates workers.
    WorkerFactory factory = WorkerFactory.newInstance(client);

    // A Worker listens to one task queue, processing workflows and activities.
    Worker worker = factory.newWorker("MyWorkflowQueue");

    // Register a Workflow implementation with this worker.
    // The implementation must be known at runtime to dispatch workflow tasks.
    worker.registerWorkflowImplementationTypes(MyWorkflow.MyWorkflowImpl.class);

    // Register Activity Types from the Activity vendor with the worker.
    // Each activity is stateless and thread-safe, so use a single shared instance.
    worker.registerActivitiesImplementations(new MyActivities.MyActivitiesImpl());

    // Start all registered workers. The workers will start polling.
    factory.start();
}
```

## Temporal Cloud Prerequisites {#prerequisites}

Temporal Client: This is a set of APIs provided by a Temporal SDK that enables communication with a Temporal Cluster. It allows you to perform operations such as getting the result of Workflow Execution, listing Workflow Executions, querying a Workflow Execution, signaling a Workflow Execution, and starting a Workflow Execution [source].

A Workflow Client is a component provided by the Temporal SDK that helps with client-side APIs and is required by Workers. It is used to establish a connection with the Temporal Frontend Service and to interact with it.

Signaling Client: While the term "Signaling Client" is not explicitly defined in the provided sources, in the context of Temporal, signaling a workflow is one of the operations that a Temporal Client can perform. Signaling is a way to send data to a workflow execution, which can be useful for pausing, resuming, or cancelling running workflows, among other things.

Scheduling Client: In the Java SDK, the ScheduleClient is an interface to the Temporal service used to create, list, and get handles to Schedules [source]. This suggests that a Scheduling Client is a specialized type of client used for operations related to scheduling.

## Authenticate your Development System {#authenticate-with-tcld}

In this step, you use 'tcld', the CLI utility, to connect to Temporal Cloud.
It lets you authenticate your development machine (called a "device" here) for use.
Issue the following command from the Terminal command line:

```
tcld login
```

The response shows a Web URL.
If your browser does not automatically open to this link, copy and paste the URL.

```
login via this url https://login.tmprl.cloud/activate?user_code=XXXX-XXXX
```

If you're working at a command line via secure shell, you may not have access to a Web browser on that system.
You can still authenticate.
Copy the URL and open it on your other system.

Confirm that the code from the command-line matches the code displayed on the Web page.
If they match, click 'Confirm' to activate the originating system you first ran 'tcld login' from.

```
Successfully logged in!
```

Confirmation also appears on the Web page.

## Generate your mTLS credentials {#mtls-credentials}

To connect to Temporal Cloud, you need mTLS credentials. mTLS stands for "mutual Transport Layer Security." mTLS is a security protocol that creates a secure connection between a client and a server. It's built on the widely adopted TLS (Transport Layer Security) protocol, and add an additional layer of authentication.

In these steps, you create an x509 mTLS Certificate Authority (CA) certificate and its mTLS private key.

:::warning

Credentials are sensitive information.
Always follow your organization's best practices for storing and accessing your secure configuration files and cryptographic keys.

:::

## Generate Credentials

Generate your mTLS credentials with the 'tcld' command line utility.
Issue the following command to build your key certificates.
You will need a meaningful IDENTIFIER and a PAIRNAME to describe the pem/key pair you generate.

```
$ tcld generate-certificates \
    certificate-authority-certificate \
    --organization "[IDENTIFIER]" \
    --validity-period [PERIOD-OF-VALIDITY] \
    --ca-certificate-file /path/to/[PAIRNAME].pem \
    --ca-key-file /path/to/[PAIRNAME].key
```

Use any organizational name you feel suitable.
For example, "Temporal Education Team".
For individuals acting within a team, you might append their names.
Name the files as you wish and set a validity period as desired.

For example,

```
tcld generate-certificates \
    certificate-authority-certificate \
    --organization "Temporal Education Team - Erica Sadun" \
    --validity-period 90d \
    --ca-certificate-file edu.pem \
    --ca-key-file edu.key
```

The 'tcld' utility will ask you to confirm credential creation.

```
storing the certificate authority (private) key at edu.key, do not share this key with anyone. confirm: [y/n] y
certificate authority generated at: edu.pem
certificate authority key generated at: edu.key
```

## Upload Your Certificate to Temporal Cloud

Next, you add your new certificate to Temporal Cloud with 'tcld'. Use the Namespace Id you noted earlier, or retrieve it again from the Temporal Cloud Website.

```
$ tcld namespace accepted-client-ca add \
    --namespace "<your_namespace_id>"
    --ca-certificate-file /path/to/your/x509/certificate.pem
```

'tcld' returns JSON showing your in-progress request to update your Namespace.

```
{
	"requestStatus": {
		"requestId": "baf5ffb9-dda3-480c-becd-4dc063341e2e",
		"state": "InProgress",
		"checkDuration": "10s",
		"operationType": "UpdateNamespace",
		"resourceId": "<your_namespace_id>",
		"resourceType": "namespace",
		"failureReason": "",
		"startTime": "2024-03-01T20:53:00Z",
		"finishTime": null
	}
}
$
```

Wait a short period of time to allow the request to complete.
Finally, confirm that your certificate has been uploaded.

```
$ tcld namespace accepted-client-ca list \
    --namespace "<your_namespace_id>" | \
	grep [YOUR UNIQUE ORGANIZATION OR SUBSTRING]
```

For example:

```
tcld namespace accepted-client-ca list \
    --namespace "$MY_NAMESPACE" | \
    grep "Erica Sadun"
```

If you encounter a "request not authenticated" error, make sure to log in again with tcld login. Otherwise, congratulations! You're ready to start using Temporal Cloud.

## Connect your Client to Temporal Cloud {#connect-to-temporal-cloud}

Before you can configure a Client to communicate with the [Temporal Cloud Cluster](/cloud), you'll need to gather several pieces of information.

- Your [Temporal Cloud Namespace Id](/cloud/namespaces#temporal-cloud-namespace-id) from the [Temporal Cloud Namespaces](https://cloud.temporal.io/namespaces) page.
- Your Namespace's [gRPC endpoint](/cloud/namespaces#temporal-cloud-grpc-endpoint).
  Each Namespace detail page contains an endpoint listing, allowing you to copy it with a click.
  An endpoint is a detailed address for Temporal Cloud gRPC connections.
- Your mTLS CA .pem certificate and .key private key.

This sample assumes you've assigned these details to local environment variables to consume from your Java code.
The code uses paths to the .pem and .key files and loads the contents from thoes locations.
In real-world deployment, follow your organization's practices to store and retrieve sensitive information.
Where needed, replace the certificate loading steps with the particulars of your own system.

### Building a Cloud Client

The following sample walks you through the process of configuring a Client to work with Temporal Cloud.

```java
package connecttocloud.workers;

import java.io.FileInputStream;
import java.io.InputStream;
import io.grpc.netty.shaded.io.netty.handler.ssl.SslContext;
import io.temporal.client.WorkflowClient;
import io.temporal.client.WorkflowClientOptions;
import io.temporal.serviceclient.SimpleSslContextBuilder;
import io.temporal.serviceclient.WorkflowServiceStubs;
import io.temporal.serviceclient.WorkflowServiceStubsOptions;
import io.temporal.worker.Worker;
import io.temporal.worker.WorkerFactory;
import java.lang.System;
import connecttocloud.CloudActivitiesImpl;
import connecttocloud.CloudWorkflowImpl;
import java.io.IOException;


public class CloudWorker {
  public static void main(String[] args) throws IOException{

    // Get the key and certificate from your environment or local machine
    String clientCertFile = System.getenv("TEMPORAL_CLOUD_CERTIFICATE_PATH");
    String clientCertPrivateKey = System.getenv("TEMPORAL_CLOUD_PRIVATE_KEY_PATH");

    // Open the key and certificate as Input Streams
    InputStream clientCertInputStream = new FileInputStream(clientCertFile);
    InputStream clientKeyInputStream = new FileInputStream(clientCertPrivateKey);

    // Generate the sslContext using the Client Cert and Key
    SslContext sslContext = SimpleSslContextBuilder.forPKCS8(clientCertInputStream, clientKeyInputStream).build();

    // Specify the host and port of your Temporal Cloud Namespace
    // Host and port format: namespace.unique_id.tmprl.cloud:port
    String namespace = System.getenv("TEMPORAL_CLOUD_NAMESPACE");
    String gRPCEndpoint = System.getenv("TEMPORAL_CLOUD_GRPC_ENDPOINT");

    // Specify the IP address, port, and SSL Context for the Service Stubs options
    WorkflowServiceStubsOptions stubsOptions = WorkflowServiceStubsOptions.newBuilder()
            .setSslContext(sslContext)
            .setTarget(gRPCEndpoint)
            .build();

    // Generate the gRPC stubs using the options provided
    WorkflowServiceStubs service = WorkflowServiceStubs.newServiceStubs(stubsOptions);

    // Specify the namespace in the Client options
    WorkflowClientOptions options = WorkflowClientOptions.newBuilder()
            .setNamespace(namespace)
            .build();

    // Initialize the Temporal Client, passing in the gRPC stubs and Client optins
    WorkflowClient client = WorkflowClient.newInstance(service, options);

    // Initialize a WorkerFactory, passing in the Temporal Client (WorkflowClient)
    WorkerFactory factory = WorkerFactory.newInstance(client);

    // Create a new Worker
    Worker worker = factory.newWorker("cloud-tasks");

    // Register the Workflow by passing in the class to the worker
    worker.registerWorkflowImplementationTypes(CloudWorkflowImpl.class);

    // Register the Activities by passing in an Activities object used for execution
    worker.registerActivitiesImplementations(new CloudActivitiesImpl());

    // Start the Worker
    factory.start();
  }
}
```

For more information about managing and generating client certificates for Temporal Cloud, see [How to manage certificates in Temporal Cloud](/cloud/certificates).

For more information about configuring TLS to secure inter- and intra-network communication for a Temporal Cluster, see [Temporal Customization Samples](https://github.com/temporalio/samples-server).

